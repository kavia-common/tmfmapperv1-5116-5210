{"is_source_file": true, "format": "Python", "description": "This file defines Flask route and related functions to collect, update, and expose application metrics such as request counts and latency statistics.", "external_files": ["flask", "time", "threading"], "external_methods": ["flask.Blueprint", "flask.jsonify", "time.time", "threading.RLock"], "published": ["inc_counter", "record_request_metrics", "get_metrics"], "classes": [{"name": "Blueprint", "description": "Flask Blueprint object for metrics endpoints"}], "methods": [{"name": "_record_latency(ms: int)", "description": "Update latency metrics with a new latency measurement in milliseconds.", "scope": "", "scopeKind": ""}, {"name": "inc_counter(name: str, amount: int = 1)", "description": "Increment a named counter safely.", "scope": "", "scopeKind": ""}, {"name": "record_request_metrics(start_ts: float)", "description": "Record metrics for a request given its start timestamp.", "scope": "", "scopeKind": ""}, {"name": "get_metrics()", "description": "Return current metrics counters and latency aggregates as a JSON response.", "scope": "", "scopeKind": ""}], "calls": ["threading.RLock", "flask.jsonify", "time.time", "_record_latency"], "search-terms": ["Flask metrics endpoint", "latency measurement", "thread-safe metrics", "request counters", "metrics.py"], "state": 2, "file_id": 22, "knowledge_revision": 69, "git_revision": "83a9d03236f354a30954acefad816a82bf4d4037", "revision_history": [{"61": ""}, {"69": "83a9d03236f354a30954acefad816a82bf4d4037"}], "ctags": [{"_type": "tag", "name": "_lock", "path": "/home/kavia/workspace/code-generation/tmfmapperv1-5116-5210/FlaskTMFTranslationMiddleware/app/observability/metrics.py", "pattern": "/^_lock = threading.RLock()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_metrics", "path": "/home/kavia/workspace/code-generation/tmfmapperv1-5116-5210/FlaskTMFTranslationMiddleware/app/observability/metrics.py", "pattern": "/^_metrics = {$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_record_latency", "path": "/home/kavia/workspace/code-generation/tmfmapperv1-5116-5210/FlaskTMFTranslationMiddleware/app/observability/metrics.py", "pattern": "/^def _record_latency(ms: int):$/", "language": "Python", "kind": "function", "signature": "(ms: int)"}, {"_type": "tag", "name": "blp", "path": "/home/kavia/workspace/code-generation/tmfmapperv1-5116-5210/FlaskTMFTranslationMiddleware/app/observability/metrics.py", "pattern": "/^blp = Blueprint(\"Metrics\", \"metrics\", url_prefix=\"\\/\", description=\"Metrics endpoint\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "get_metrics", "path": "/home/kavia/workspace/code-generation/tmfmapperv1-5116-5210/FlaskTMFTranslationMiddleware/app/observability/metrics.py", "pattern": "/^def get_metrics():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "inc_counter", "path": "/home/kavia/workspace/code-generation/tmfmapperv1-5116-5210/FlaskTMFTranslationMiddleware/app/observability/metrics.py", "pattern": "/^def inc_counter(name: str, amount: int = 1):$/", "language": "Python", "kind": "function", "signature": "(name: str, amount: int = 1)"}, {"_type": "tag", "name": "record_request_metrics", "path": "/home/kavia/workspace/code-generation/tmfmapperv1-5116-5210/FlaskTMFTranslationMiddleware/app/observability/metrics.py", "pattern": "/^def record_request_metrics(start_ts: float):$/", "language": "Python", "kind": "function", "signature": "(start_ts: float)"}], "hash": "6964af1d98a7e4b0ac115b38855664c3", "format-version": 4, "code-base-name": "FlaskTMFTranslationMiddleware", "filename": "FlaskTMFTranslationMiddleware/app/observability/metrics.py", "fields": [{"name": "_lock = threading.RLock()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "_metrics = {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "blp = Blueprint(\"Metrics\", \"metrics\", url_prefix=\"\\/\", description=\"Metrics endpoint\")", "scope": "", "scopeKind": "", "description": "unavailable"}]}